- **什么情况下应该使用 `uint` 或 `int` ?**

uint（无符号整数）和int（有符号整数）；Solidity中数组长度，address类型等底层均使用uint, 保持类型一致； 需要负数的场景或者外部数据接口返回带符号数据，就必须使用int。

- **如何选择存储以太坊地址使用的数据结构？**

使用address数据类型来存储以太坊地址，适用于用户钱包地址或合约地址；

- **在何时使用 `string` 与 `bytes` ？**

当存储可读文本或者长度不固定的长文本的时候，优先使用 `string`； 当处理哈希值、加密结果、原始字节码时，用`bytes`更高效。

- **数组在 Solidity 中的应用场景是什么？**

数组用于存储相同类型的元素列表， 可用于存储用户地址列表，ID集合等长度可变的数据或者长度固定的数据。

- **为何以及如何使用 `mapping` ？**

Solidity 中的 `mapping` 是一种高效的键值存储结构，用于快速查找和减少内存开销；基本用法示例：
```
mapping(keyType => valueType) public myMap
```
常用键名类型有 address/uint/byte32， 值类型可以是任意的; 应用场景如 代币余额、权限管理、投票记录等高频键值查询。

- **`struct` 的用途及实例**

`struct` 用于创建自定义的数据结构，将多个变量组合为逻辑单元，提升代码可读性和存储效率，
```
struct Person {
    string name;
    uint256 age;
}
```

- **何时使用`enum`及其好处是什么?**

`enum`（枚举）通常用于定义一组有限的命名常量，适用于需要明确状态或选项的场景： 1、当变量只能从预定义的一组值中取值时，比如状态管理：`enum orderStatus {Pending, shipped, Delivered, Cancelled }, orderStatus status` //仅允许枚举值； 2、用语义化名称替代硬编码数字 提升可读性；

使用`enum`有下列好处：1、类型安全（编译器会检查赋值是否合法，避免无效值）；2、节省`Gas`（枚举底层存储为`uint8`， 比字符串更高效）；3、提高代码可维护性（集中管理常量，修改时只需要调整枚举定义）；4、清晰表达意图（通过命名值直观地展示业务逻辑）；

枚举的使用场景优先级是：状态机>选项机制>魔法数字替换；合理使用`enum`能显著提升合约的安全性和可读性。

- **在设计合约时如何考虑存储和`Gas`成本？**

应该选择高效的数据结构来减少存储和执行成本；存储优化原则包含以下：1、最小化链上存储（将非关键数据移到IPFS或Arweave,链上仅存哈希 bytes32）； 2、紧凑变量打包（每个存储槽可合并多个小变量，并按变量大小降序排列 以自动打包）； 3、选择合适的数据类型（当为固定大小时优先选用bytes32 而不是string， 非负数值用uint 而不是int，避免符号位浪费空间）。

Gas成本控制有以下：1、减少存储操作（临时变量用memory替代storage处理中间数据，批量更新时合并多次写操作）；2、高效数据结构（用映射替代数组，mapping查询为O（1），适合高频访问 如余额检查， 用uint的位掩码存储多个布尔值）；3、循环与计算优化（限制循环次数，避免遍历动态数组）。

通过合理设计存储结构和算法，可以降低合约部署和交互成本达50%以上，尤其对高频调用的合约至关重要。

- **如何根据数据访问模式选择数据结构?**

在Solidity中，根据数据访问模式选择数据结构需要平衡 查询效率、存储成本和操作复杂度；1、高频查询，无需遍历，选择mapping，适合键值查找；2、需要变量或排序，使用动态数组，结合mapping记录索引；3、键值对+遍历需求，使用映射+数组组合，适用场景是需要同时支持遍历和单点查询；4、频繁增删数据使用链表模式；5、固定长度数据集使用固定大小数组；

通过匹配数据访问模式与结构特性，可显著降低Gas消耗并提升合约性能。

