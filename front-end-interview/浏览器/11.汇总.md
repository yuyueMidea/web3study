**汇总**

**介绍下重绘和重排（repaint & reflow），以及如何进行优化**

重排，也称为布局回流，是指浏览器计算页面的几何布局，确定元素在页面中的位置和大小；当页面布局或几何属性发生变化时，会触发重排。触发重排的常见操作有：添加或删除可见的dom元素；元素位置、尺寸改变；页面渲染初始化；浏览器窗口大小变化；读取某些属性（offsetTop, offsetLeft, offsetWidth, offsetHeight, scrollTop等）。

重绘，是指当元素的外观样式发生变化（如颜色、背景、边框等），但不影响布局时，浏览器会重新绘制元素的外观。触发重绘的常见操作有：改变颜色、边框样式、可见性、改变阴影。

性能影响：重排比重绘代价更高，重排会导致浏览器重新计算整个或局部页面的布局，而重绘只涉及到外观更新；频繁的重排和重绘会导致页面性能下降，出现“卡顿”现象。

有以下优化策略：
- 1、减少重排次数，批量dom操作、离线dom操作；
- 2、减少重排范围：尽量在低层级的dom节点上触发重排，减少影响范围；避免使用table布局，因为table中的一个小改动可能导致整个table重排。
- 3、避免强制同步布局；
- 4、使用CSS优化：使用`transform和opacity`来实现动画，它们不会触发重排和重绘；避免使用CSS表达式（如`calc`在某些情况下可能会引发性能问题）；使用`will-change`属性提示浏览器哪些属性会变化。

其他优化技巧：
- 避免频繁操作样式、最好一次性修改class 而非逐个修改style属性；
- 对复杂动画元素，使用`position: absolute或fixed`，使其脱离文档流；
- 使用虚拟dom库（如React、Vue）来最小化dom操作。
